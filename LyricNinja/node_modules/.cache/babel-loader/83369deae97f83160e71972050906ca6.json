{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Peran\\\\LyricNinja\\\\Lyric_Ninja\\\\src\\\\components\\\\MainWord.tsx\";\nimport React, { useState, useEffect, useRef } from 'react';\n\nconst MainWord = ({\n  words,\n  wordIndexStart,\n  visible: visibleStart\n}) => {\n  const [progress, setProgress] = useState(0);\n  const [visible, setVisible] = useState(visibleStart);\n  const [wordIndex, setIndex] = useState(wordIndexStart);\n  const duration = 3;\n  const animationFrameHandle = useRef(0);\n  const prevTime = useRef(performance.now());\n  const outputValueRange = 1;\n\n  function easeIn(x) {\n    return Math.pow(Math.min(1, x * 2), 2);\n  }\n\n  function easeOut(x) {\n    return 1 - Math.pow(1 - x, 3);\n  }\n\n  useEffect(() => {\n    setProgress(0); // if (visible) setIndex(wordIndex+2);\n    // console.log(wordIndex);\n    // setVisible(!visible);\n\n    prevTime.current = performance.now();\n\n    function render(timestamp) {\n      animationFrameHandle.current = requestAnimationFrame(render);\n      setProgress(oldValue => {\n        if (oldValue >= 1) {\n          cancelAnimationFrame(animationFrameHandle.current);\n          return 0;\n        }\n\n        const secondsElapsed = (timestamp - prevTime.current) / 1000;\n        return Math.min(oldValue + outputValueRange * secondsElapsed / duration, 1);\n      });\n      prevTime.current = timestamp;\n    }\n\n    render(performance.now());\n    return () => cancelAnimationFrame(animationFrameHandle.current);\n  }, [JSON.stringify(words)]);\n\n  if (visible) {\n    return (\n      /*#__PURE__*/\n      // <div className=\"main-word\" style={{ opacity: 1-1.2*easeIn(progress), transform: `translateX(${-100*easeIn(progress)}%)`}}>\n      //   {words[wordIndex]}\n      // </div>\n      React.createElement(\"div\", {\n        className: \"main-word\",\n        style: {\n          opacity: 0\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }\n      }, words[wordIndex])\n    );\n  } else {\n    return (\n      /*#__PURE__*/\n      // <div className=\"main-word\" style={{ opacity: easeOut(progress), transform: `translateX(${100-100*easeOut(progress)}%)`}}>\n      //     {(wordIndex < 0)? \"b\": words[wordIndex-1]}\n      // </div>\n      React.createElement(\"div\", {\n        className: \"main-word\",\n        style: {\n          opacity: 1\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 13\n        }\n      }, wordIndex < 0 ? \"b\" : words[wordIndex])\n    );\n  }\n};\n\nexport default MainWord;","map":{"version":3,"sources":["C:/Users/Peran/LyricNinja/Lyric_Ninja/src/components/MainWord.tsx"],"names":["React","useState","useEffect","useRef","MainWord","words","wordIndexStart","visible","visibleStart","progress","setProgress","setVisible","wordIndex","setIndex","duration","animationFrameHandle","prevTime","performance","now","outputValueRange","easeIn","x","Math","pow","min","easeOut","current","render","timestamp","requestAnimationFrame","oldValue","cancelAnimationFrame","secondsElapsed","JSON","stringify","opacity"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\n\r\n\r\ninterface MainWordProps {\r\n    words: string[];\r\n    wordIndexStart: number;\r\n    visible: boolean;\r\n}\r\n\r\n\r\nconst MainWord: React.FC<MainWordProps> = ({words, wordIndexStart, visible: visibleStart}) => {\r\n\r\n    const [progress, setProgress] = useState(0);\r\n    const [visible, setVisible] = useState(visibleStart);\r\n    const [wordIndex, setIndex] = useState(wordIndexStart);\r\n    const duration = 3;\r\n    const animationFrameHandle = useRef(0);\r\n    const prevTime = useRef(performance.now());\r\n    const outputValueRange = 1;\r\n\r\n    function easeIn(x: number): number {\r\n        return Math.pow(Math.min(1, x*2), 2);\r\n    }\r\n\r\n    function easeOut(x: number): number {\r\n        return 1 - Math.pow(1 - x, 3);\r\n    }\r\n\r\n    useEffect(() => {\r\n        setProgress(0);\r\n        // if (visible) setIndex(wordIndex+2);\r\n        // console.log(wordIndex);\r\n        // setVisible(!visible);\r\n        prevTime.current = performance.now();\r\n        function render(timestamp: DOMHighResTimeStamp) {\r\n            animationFrameHandle.current = requestAnimationFrame(render);\r\n            setProgress(oldValue => {\r\n                if (oldValue >= 1) {\r\n                    \r\n                    cancelAnimationFrame(animationFrameHandle.current);\r\n                    \r\n                    return 0;\r\n                } \r\n                const secondsElapsed = (timestamp - prevTime.current) / 1000;\r\n                return Math.min(oldValue + outputValueRange * secondsElapsed / duration, 1);\r\n            })\r\n            prevTime.current = timestamp;\r\n        }\r\n\r\n        render(performance.now());\r\n        return () => cancelAnimationFrame(animationFrameHandle.current);\r\n    }, [JSON.stringify(words)]);\r\n    if (visible) {\r\n        return (\r\n            // <div className=\"main-word\" style={{ opacity: 1-1.2*easeIn(progress), transform: `translateX(${-100*easeIn(progress)}%)`}}>\r\n            //   {words[wordIndex]}\r\n            // </div>\r\n            <div className=\"main-word\" style={{ opacity: 0}}>\r\n              {words[wordIndex]}\r\n            </div>\r\n        );\r\n    }\r\n    else {\r\n        return (\r\n            // <div className=\"main-word\" style={{ opacity: easeOut(progress), transform: `translateX(${100-100*easeOut(progress)}%)`}}>\r\n            //     {(wordIndex < 0)? \"b\": words[wordIndex-1]}\r\n            // </div>\r\n            <div className=\"main-word\" style={{ opacity: 1 }}>\r\n                {(wordIndex < 0)? \"b\": words[wordIndex]}\r\n            </div>\r\n        );\r\n    }\r\n  };\r\n\r\nexport default MainWord;\r\n  "]},"metadata":{},"sourceType":"module"}