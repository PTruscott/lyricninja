{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Peran\\\\LyricNinja\\\\Lyric_Ninja\\\\src\\\\components\\\\MainWord.tsx\";\nimport React, { useState, useEffect, useRef } from 'react';\n\nconst MainWord = ({\n  initialWord,\n  nextWord: word,\n  visible\n}) => {\n  const [progress, setProgress] = useState(0);\n  const [wordToShow, setWordToShow] = useState(initialWord);\n  const [nextWord, setNextWord] = useState(word);\n  const duration = 3;\n  const animationFrameHandle = useRef(0);\n  const prevTime = useRef(performance.now());\n  const outputValueRange = 1;\n\n  function easeIn(x) {\n    return Math.pow(Math.min(1, x * 2), 2);\n  }\n\n  function easeOut(x) {\n    return 1 - Math.pow(1 - x, 3);\n  }\n\n  useEffect(() => {\n    if (progress > 0) {\n      setProgress(0);\n      console.log(\"Click in progress!\");\n      console.log(\"wordToshow: \" + wordToShow + \" NextWord: \" + nextWord + \" Word: \" + word);\n      visible = !visible;\n      setWordToShow(nextWord);\n      setNextWord(word);\n    }\n\n    prevTime.current = performance.now();\n\n    function render(timestamp) {\n      animationFrameHandle.current = requestAnimationFrame(render);\n      setProgress(oldValue => {\n        if (oldValue >= 1) {\n          cancelAnimationFrame(animationFrameHandle.current);\n          visible = !visible;\n          setWordToShow(nextWord);\n          setNextWord(word);\n          return 0;\n        }\n\n        const secondsElapsed = (timestamp - prevTime.current) / 1000;\n        return Math.min(oldValue + outputValueRange * secondsElapsed / duration, 1);\n      });\n      prevTime.current = timestamp;\n    }\n\n    render(performance.now());\n    return () => cancelAnimationFrame(animationFrameHandle.current);\n  }, [visible, word]);\n\n  if (visible) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"main-word\",\n      style: {\n        opacity: 1 - 1.2 * easeIn(progress),\n        transform: `translateX(${-100 * easeIn(progress)}%)`\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 13\n      }\n    }, wordToShow);\n  } else {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"main-word\",\n      style: {\n        opacity: easeOut(progress),\n        transform: `translateX(${100 - 100 * easeOut(progress)}%)`\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }\n    }, nextWord);\n  }\n};\n\nexport default MainWord;","map":{"version":3,"sources":["C:/Users/Peran/LyricNinja/Lyric_Ninja/src/components/MainWord.tsx"],"names":["React","useState","useEffect","useRef","MainWord","initialWord","nextWord","word","visible","progress","setProgress","wordToShow","setWordToShow","setNextWord","duration","animationFrameHandle","prevTime","performance","now","outputValueRange","easeIn","x","Math","pow","min","easeOut","console","log","current","render","timestamp","requestAnimationFrame","oldValue","cancelAnimationFrame","secondsElapsed","opacity","transform"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { Console } from 'console';\r\n\r\n\r\ninterface MainWordProps {\r\n  initialWord: string;\r\n  nextWord: string;\r\n  visible: boolean;\r\n}\r\n\r\n\r\nconst MainWord: React.FC<MainWordProps> = ({ initialWord, nextWord: word, visible}) => {\r\n\r\n    const [progress, setProgress] = useState(0);\r\n    const [wordToShow, setWordToShow] = useState(initialWord);\r\n    const [nextWord, setNextWord] = useState(word);\r\n    const duration = 3;\r\n    const animationFrameHandle = useRef(0);\r\n    const prevTime = useRef(performance.now());\r\n    const outputValueRange = 1;\r\n\r\n    function easeIn(x: number): number {\r\n        return Math.pow(Math.min(1, x*2), 2);\r\n    }\r\n\r\n    function easeOut(x: number): number {\r\n        return 1 - Math.pow(1 - x, 3);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (progress > 0) {\r\n            setProgress(0);\r\n            console.log(\"Click in progress!\")\r\n            console.log(\"wordToshow: \"+wordToShow+\" NextWord: \"+nextWord+\" Word: \"+word);\r\n            visible = !visible;\r\n            setWordToShow(nextWord);\r\n            setNextWord(word);\r\n        }\r\n        prevTime.current = performance.now();\r\n        function render(timestamp: DOMHighResTimeStamp) {\r\n            animationFrameHandle.current = requestAnimationFrame(render);\r\n            setProgress(oldValue => {\r\n                if (oldValue >= 1) {\r\n                    cancelAnimationFrame(animationFrameHandle.current);\r\n                    visible = !visible;\r\n                    setWordToShow(nextWord);\r\n                    setNextWord(word);\r\n                    return 0;\r\n                } \r\n                const secondsElapsed = (timestamp - prevTime.current) / 1000;\r\n                return Math.min(oldValue + outputValueRange * secondsElapsed / duration, 1);\r\n            })\r\n            prevTime.current = timestamp;\r\n        }\r\n\r\n        render(performance.now());\r\n        return () => cancelAnimationFrame(animationFrameHandle.current);\r\n    }, [visible, word])\r\n    if (visible) {\r\n        return (\r\n            <div className=\"main-word\" style={{ opacity: 1-1.2*easeIn(progress), transform: `translateX(${-100*easeIn(progress)}%)`}}>\r\n              {wordToShow}\r\n            </div>\r\n        );\r\n    }\r\n    else {\r\n        return (\r\n            <div className=\"main-word\" style={{ opacity: easeOut(progress), transform: `translateX(${100-100*easeOut(progress)}%)`}}>\r\n                {nextWord}\r\n            </div>\r\n        );\r\n    }\r\n  };\r\n\r\nexport default MainWord;\r\n  "]},"metadata":{},"sourceType":"module"}